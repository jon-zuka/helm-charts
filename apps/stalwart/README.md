# stalwart

![Version: 0.0.0-div.1](https://img.shields.io/badge/Version-0.0.0--div.1-informational?style=flat-square) ![AppVersion: 0.0.0-div.1](https://img.shields.io/badge/AppVersion-0.0.0--div.1-informational?style=flat-square)

Self hosted email service

## Requirements

| Repository | Name | Version |
|------------|------|---------|
| file://../../libs/common | common | >=0.0.0-dev.1 |

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| deploy.hpa | object | `{"cpu":90,"max":1,"memory":90,"min":1}` | Horizontal pod scaling setup |
| deploy.image.policy | string | `"IfNotPresent"` |  |
| deploy.image.repository | string | `"ghcr.io/stalwartlabs/mail-server"` | image to use for deploying |
| deploy.image.tag | string | `"v0.11.6"` |  |
| deploy.resources | object | `{"limits":{"cpu":"1200m","memory":"512Mi"},"requests":{"cpu":"100m","memory":"256Mi"}}` | Resources |
| pvc[0].class | string | `"local-path"` |  |
| pvc[0].name | string | `"data"` |  |
| pvc[0].path | string | `"/opt/stalwart-mail/data"` |  |
| pvc[0].size | string | `"10Gi"` |  |
| sa.create | bool | `false` |  |
| svc[0].name | string | `"http"` |  |
| svc[0].ports[0].containerPort | int | `8080` |  |
| svc[0].ports[0].name | string | `"http"` |  |
| svc[0].ports[0].port | int | `80` |  |
| svc[0].ports[1].name | string | `"https"` |  |
| svc[0].ports[1].port | int | `443` |  |
| svc[0].type | string | `"ClusterIP"` |  |
| svc[1].name | string | `"tcp"` |  |
| svc[1].ports[0].name | string | `"imap"` |  |
| svc[1].ports[0].port | int | `143` |  |
| svc[1].ports[1].name | string | `"pop"` |  |
| svc[1].ports[1].port | int | `110` |  |
| svc[1].ports[2].name | string | `"pops"` |  |
| svc[1].ports[2].port | int | `995` |  |
| svc[1].ports[3].name | string | `"smtp"` |  |
| svc[1].ports[3].port | int | `25` |  |
| svc[1].ports[4].name | string | `"smtpsub"` |  |
| svc[1].ports[4].port | int | `587` |  |
| svc[1].ports[5].name | string | `"imaps"` |  |
| svc[1].ports[5].port | int | `993` |  |
| svc[1].ports[6].name | string | `"smtps"` |  |
| svc[1].ports[6].port | int | `465` |  |
| svc[1].type | string | `"ClusterIP"` |  |
| svc[2].name | string | `"smtp"` |  |
| svc[2].ports[0].name | string | `"smtp"` |  |
| svc[2].ports[0].port | int | `25` |  |
| svc[2].type | string | `"LoadBalancer"` |  |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.14.2](https://github.com/norwoodj/helm-docs/releases/v1.14.2)

#### Example of a values.yaml

```yaml
pvc:
  - name: data
    size: 10Gi
    class: local-path
    path: /opt/stalwart-mail/data

cm:
  - name: config
    path: /opt/stalwart-mail/etc/config.toml
    data:
      config.toml: |
        authentication.fallback-admin.secret = "YOUR_ADMIN_SECRET_HERE"
        authentication.fallback-admin.user = "admin"
        directory.internal.store = "rocksdb"
        directory.internal.type = "internal"
        server.hostname = "mail.my-website.us"
        server.listener.http.bind = "0.0.0.0:8080"
        server.listener.http.protocol = "http"
        server.listener.https.bind = "[::]:443"
        server.listener.https.protocol = "http"
        server.listener.https.tls.implicit = true
        server.listener.imap.bind = "[::]:143"
        server.listener.imap.protocol = "imap"
        server.listener.imaptls.bind = "0.0.0.0:30993"
        server.listener.imaptls.protocol = "imap"
        server.listener.imaptls.tls.implicit = true
        server.listener.pop3.bind = "[::]:110"
        server.listener.pop3.protocol = "pop3"
        server.listener.pop3s.bind = "0.0.0.0:30995"
        server.listener.pop3s.protocol = "pop3"
        server.listener.pop3s.tls.implicit = true
        server.listener.sieve.bind = "[::]:4190"
        server.listener.sieve.protocol = "managesieve"
        server.listener.smtp.bind = "0.0.0.0:25"
        server.listener.smtp.protocol = "smtp"
        server.listener.submission.bind = "0.0.0.0:30587"
        server.listener.submission.protocol = "smtp"
        server.listener.submissions.bind = "0.0.0.0:30465"
        server.listener.submissions.protocol = "smtp"
        server.listener.submissions.tls.implicit = true
        server.max-connections = 8192
        server.socket.backlog = 1024
        server.socket.nodelay = true
        server.socket.reuse-addr = true
        server.socket.reuse-port = true
        storage.blob = "rocksdb"
        storage.data = "rocksdb"
        storage.directory = "internal"
        storage.fts = "rocksdb"
        storage.lookup = "rocksdb"
        store.rocksdb.compression = "lz4"
        store.rocksdb.path = "/opt/stalwart-mail/data"
        store.rocksdb.type = "rocksdb"

        [tracer.console]
        type = "console"
        level = "trace"
        ansi = true
        enable = true
       
        [certificate."default"]
        cert = "%{file:/opt/stalwart-smtp/etc/private/tls.crt}%"
        private-key = "%{file:/opt/stalwart-smtp/etc/private/tls.key}%"
        default = true

crt:
  - name: my-website-tls
    path: "/opt/stalwart-smtp/etc/private"

```
